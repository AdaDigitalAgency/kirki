{"mappings":"CAIC,WACA,MAAMA,EAAUC,SAASC,cAAc,mCACvC,IAAKF,EAAS,OAEd,IAAIG,EAASH,EAAQE,cAAc,sBACnC,IAAKC,EAAQ,OAEb,MAAMC,EAASJ,EAAQE,cAAc,2BACrC,IAAKE,EAAQ,OAEbA,EAAOC,iBAAiB,SAKxB,SAAwBC,GACvB,GAAIC,EAAW,OACfA,GAAY,EAEZ,MAAMH,EAASI,KACfJ,EAAOK,UAAUC,IAAI,cAEjBC,GACHC,OAAOC,aAAaF,GAGrBA,EAAY,EAEZ,IAAIG,EAAO,CACVC,OAAQ,yBACRC,MAAOZ,EAAOa,QAAQD,OAGvBE,OACEC,KAAK,CACLC,IAAKC,QACLC,KAAM,OACNR,KAAMA,IAENS,MAAK,SAAUC,GACfC,EAAWD,EAAEE,QAAU,UAAY,QAASF,EAAEV,KAC/C,IACCa,MAAK,SAAUH,GACfC,EAAW,QAAS,wBACrB,IACCG,QAAO,SAAUJ,GACjBjB,GAAY,EACZH,EAAOK,UAAUoB,OAAO,cAExBlB,EAAYC,OAAOkB,YAAW,WAc3B3B,IACLA,EAAO4B,YAAc,GACrB5B,EAAOM,UAAUoB,OAAO,cACxB1B,EAAOM,UAAUoB,OAAO,YACxB1B,EAAOM,UAAUC,IAAI,aAhBnB,GAAG,IACJ,GACF,IAzCA,IAAIH,GAAY,EACZI,EAAoB,EA0CxB,SAASc,EAAWO,EAAgBD,GAC9B5B,IACLA,EAAO4B,YAAcA,EACrB5B,EAAOM,UAAUC,IAAe,YAAXsB,EAAuB,aAAe,YAC3D7B,EAAOM,UAAUoB,OAAO,aACzB,CASD,CArEC","sources":["packages/settings/src/settings.ts"],"sourcesContent":["import \"./settings.scss\";\n\ndeclare var ajaxurl: string;\n\n(function () {\n\tconst metabox = document.querySelector(\".kirki-clear-font-cache-metabox\");\n\tif (!metabox) return;\n\n\tvar notice = metabox.querySelector(\".submission-status\");\n\tif (!notice) return;\n\n\tconst button = metabox.querySelector(\".kirki-clear-font-cache\");\n\tif (!button) return;\n\n\tbutton.addEventListener(\"click\", clearFontCache);\n\n\tlet doingAjax = false;\n\tlet timeoutId: number = 0;\n\n\tfunction clearFontCache(e: Event) {\n\t\tif (doingAjax) return;\n\t\tdoingAjax = true;\n\n\t\tconst button = this as HTMLButtonElement;\n\t\tbutton.classList.add(\"is-loading\");\n\n\t\tif (timeoutId) {\n\t\t\twindow.clearTimeout(timeoutId);\n\t\t}\n\n\t\ttimeoutId = 0;\n\n\t\tvar data = {\n\t\t\taction: \"kirki_clear_font_cache\",\n\t\t\tnonce: button.dataset.nonce,\n\t\t};\n\n\t\tjQuery\n\t\t\t.ajax({\n\t\t\t\turl: ajaxurl,\n\t\t\t\ttype: \"POST\",\n\t\t\t\tdata: data,\n\t\t\t})\n\t\t\t.done(function (r) {\n\t\t\t\tshowNotice(r.success ? \"success\" : \"error\", r.data);\n\t\t\t})\n\t\t\t.fail(function (r) {\n\t\t\t\tshowNotice(\"error\", \"Something went wrong.\");\n\t\t\t})\n\t\t\t.always(function (r) {\n\t\t\t\tdoingAjax = false;\n\t\t\t\tbutton.classList.remove(\"is-loading\");\n\n\t\t\t\ttimeoutId = window.setTimeout(function () {\n\t\t\t\t\thideNotice();\n\t\t\t\t}, 4000);\n\t\t\t});\n\t}\n\n\tfunction showNotice(status: string, textContent: string) {\n\t\tif (!notice) return;\n\t\tnotice.textContent = textContent;\n\t\tnotice.classList.add(status === \"success\" ? \"is-success\" : \"is-error\");\n\t\tnotice.classList.remove(\"is-hidden\");\n\t}\n\n\tfunction hideNotice() {\n\t\tif (!notice) return;\n\t\tnotice.textContent = \"\";\n\t\tnotice.classList.remove(\"is-success\");\n\t\tnotice.classList.remove(\"is-error\");\n\t\tnotice.classList.add(\"is-hidden\");\n\t}\n})();\n"],"names":["metabox","document","querySelector","notice","button","addEventListener","e","doingAjax","this","classList","add","timeoutId","window","clearTimeout","data","action","nonce","dataset","jQuery","ajax","url","ajaxurl","type","done","r","showNotice","success","fail","always","remove","setTimeout","textContent","status"],"version":3,"file":"settings.js.map"}