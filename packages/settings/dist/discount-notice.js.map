{"mappings":"6DAAO,MAAMA,EAAa,CACzBC,EACAC,EACAC,KAEA,GAAIF,EAAGG,QAAQF,GACd,OAAOD,EAGR,GAAmB,SAAfA,EAAGI,SAAqC,SAAfJ,EAAGI,QAC/B,OAGD,IAAIC,EACJH,EAAQA,GAAgB,GAExB,IAAK,IAAII,EAAI,EAAGA,EAAIJ,EAAOI,IAAK,CAC/B,MAAMC,EAAaP,EAAGO,WAEtB,IACEA,GACsB,SAAvBA,EAAWH,SACY,SAAvBG,EAAWH,QAEX,MAGD,GAAIG,EAAWJ,QAAQF,GACtB,OAAOM,EAGRP,EAAKO,CACN,CAEA,OAAOF,CAAA,E,MClCRG,EAAeC,OCKd,WASA,SAASC,EAAQC,GAChB,MAAMC,EAASb,EAAWc,KAAM,0BAChC,IAAKD,EAAQ,OACb,IAAIE,EAAQF,EAAOG,QAAQC,aAC3BF,EAAQA,GAAgB,GAExBG,EAAAT,GACEU,KAAK,CACLC,IAAKC,QACLC,KAAM,OACNC,KAAM,CACLC,OAAQ,gCACRT,MAAOA,EACPJ,QAAS,KAGVc,QAAO,SAAUC,GACbA,EAAEC,SAASC,QAAQC,IAAIH,EAAEH,KAC9B,GACF,CA1BCL,EAAAT,EAAA,CAAOqB,UAAUC,GAChB,QACA,wDACApB,EA0BH,CA/BC,E","sources":["packages/settings/src/utils.ts","jQuery.js","packages/settings/src/discount-notice.ts"],"sourcesContent":["export const getClosest = (\n\tel: HTMLElement,\n\tselector: string,\n\tdepth?: number\n): HTMLElement | undefined => {\n\tif (el.matches(selector)) {\n\t\treturn el;\n\t}\n\n\tif (el.tagName === \"BODY\" || el.tagName === \"HTML\") {\n\t\treturn undefined;\n\t}\n\n\tlet closest = undefined;\n\tdepth = depth ? depth : 20;\n\n\tfor (let i = 0; i < depth; i++) {\n\t\tconst parentNode = el.parentNode as HTMLElement;\n\n\t\tif (\n\t\t\t!parentNode ||\n\t\t\tparentNode.tagName === \"BODY\" ||\n\t\t\tparentNode.tagName === \"HTML\"\n\t\t) {\n\t\t\tbreak;\n\t\t}\n\n\t\tif (parentNode.matches(selector)) {\n\t\t\treturn parentNode;\n\t\t}\n\n\t\tel = parentNode;\n\t}\n\n\treturn closest;\n};\n","module.exports=jQuery;","import { getClosest } from \"./utils\";\nimport jQuery from \"jquery\";\n\ndeclare var ajaxurl: string;\n\n(function () {\n\tfunction init() {\n\t\tjQuery(document).on(\n\t\t\t\"click\",\n\t\t\t\".kirki-discount-notice.is-dismissible .notice-dismiss\",\n\t\t\tdismiss\n\t\t);\n\t}\n\n\tfunction dismiss(e: JQuery.ClickEvent) {\n\t\tconst notice = getClosest(this, \".kirki-discount-notice\");\n\t\tif (!notice) return;\n\t\tlet nonce = notice.dataset.dismissNonce;\n\t\tnonce = nonce ? nonce : \"\";\n\n\t\tjQuery\n\t\t\t.ajax({\n\t\t\t\turl: ajaxurl,\n\t\t\t\ttype: \"post\",\n\t\t\t\tdata: {\n\t\t\t\t\taction: \"kirki_dismiss_discount_notice\",\n\t\t\t\t\tnonce: nonce,\n\t\t\t\t\tdismiss: 1,\n\t\t\t\t},\n\t\t\t})\n\t\t\t.always(function (r) {\n\t\t\t\tif (r.success) console.log(r.data);\n\t\t\t});\n\t}\n\n\tinit();\n})();\n"],"names":["$8f87dbd6e216f0fb$export$211731fc355e9121","el","selector","depth","matches","tagName","closest","i","parentNode","$0a2eb9defebd2c69$exports","jQuery","dismiss","e","notice","this","nonce","dataset","dismissNonce","$parcel$interopDefault","ajax","url","ajaxurl","type","data","action","always","r","success","console","log","document","on"],"version":3,"file":"discount-notice.js.map"}